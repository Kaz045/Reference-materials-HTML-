# 今後のhtmlエンハンス計画

---

いいね。**自動化はちゃんとできます。**
選択肢は大きく2つあって、Kazの「できれば自動化したい」「運用ラクにしたい」ならこの順が現実的。

---

## ① いちばんラク：index.html を“自動生成ページ”にする（おすすめ）

**index.html は固定のまま**で、ページを開いたときに GitHub のAPIからファイル一覧を取って、**自動でリンク一覧を描画**します。
→ **新しいHTMLを追加しても index は更新不要**（これが最強）

### 仕組み

* `index.html` のJSが
* `https://api.github.com/repos/Kaz045/Reference-materials-HTML-/contents/` を叩いて
* `*.html` を抽出してリンクを自動生成

### これの良いところ

* ✅ **コミット不要**（index更新作業ゼロ）
* ✅ GitHub Actions不要
* ✅ HTML増やすだけで勝手に一覧に出る

### これの注意点

* 公開リポジトリならOK
* GitHub APIはレート制限あり（普通の個人利用ならまず当たらない）

---

### コピペで完成版（index.html をこれに置き換え）

※ **repo名の `Reference-materials-HTML-` はそのままでOK**（今の状態に合わせてある）

```html
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HTML資料一覧</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", sans-serif; padding: 24px; }
    h1 { margin: 0 0 16px; }
    .note { color: #666; margin-bottom: 16px; }
    ul { line-height: 1.9; }
    a { text-decoration: none; }
    a:hover { text-decoration: underline; }
    .err { color: #b00020; }
  </style>
</head>
<body>
  <h1>HTML資料一覧</h1>
  <div class="note">HTMLファイルを追加すると自動で一覧に出ます。</div>
  <div id="status"></div>
  <ul id="list"></ul>

  <script>
    const owner = "Kaz045";
    const repo  = "Reference-materials-HTML-";
    const path  = ""; // ルート直下。フォルダ運用にするなら "docs" などに変更

    const statusEl = document.getElementById("status");
    const listEl = document.getElementById("list");

    function humanize(name) {
      // .html を外して、簡易的に見やすくする（必要なら好みに調整）
      return name.replace(/\.html$/i, "")
                 .replace(/[-_]/g, " ");
    }

    async function main() {
      try {
        statusEl.textContent = "読み込み中…";
        const url = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;
        const res = await fetch(url, { headers: { "Accept": "application/vnd.github+json" } });
        if (!res.ok) throw new Error(`GitHub API error: ${res.status}`);

        const items = await res.json();

        // ルート直下の html を抽出（index.html は除外）
        const pages = items
          .filter(x => x.type === "file")
          .map(x => x.name)
          .filter(n => n.toLowerCase().endsWith(".html"))
          .filter(n => n.toLowerCase() !== "index.html")
          .sort((a,b) => a.localeCompare(b, "en"));

        listEl.innerHTML = "";
        if (pages.length === 0) {
          statusEl.textContent = "";
          listEl.innerHTML = "<li>まだHTMLがありません。</li>";
          return;
        }

        for (const name of pages) {
          const li = document.createElement("li");
          const a = document.createElement("a");
          a.href = `./${encodeURIComponent(name)}`;
          a.textContent = humanize(name);
          li.appendChild(a);
          listEl.appendChild(li);
        }

        statusEl.textContent = "";
      } catch (e) {
        statusEl.innerHTML = `<div class="err">一覧の自動生成に失敗しました：${e.message}</div>`;
      }
    }

    main();
  </script>
</body>
</html>
```

> これにすると、次からは **HTMLファイルを追加するだけ**で、トップの一覧に自動で出ます。

---

## ② もっとガチ：GitHub Actionsで index.html を自動生成（完全自動・堅い）

「API叩くのは嫌」「GitHub API制限が気になる」「見た目や順序を厳密管理したい」ならこっち。

### 仕組み

* HTML追加/更新のPushをトリガーに
* リポジトリ内の `*.html` を走査して
* `index.html` を自動生成してコミットする

### 良いところ

* ✅ 常に静的（高速・安定）
* ✅ API不要
* ✅ レート制限なし

### ただし

* 最初にActions用のファイルを置く必要がある（1回だけ）

---

## Copilotに入れるならどんなプロンプト？

### （①のJS方式で十分なら、Copilot不要）

でも「indexを整形して見栄えよくしたい」などがあれば、こう投げるといいです。

**Copilotプロンプト例（そのまま貼ってOK）**

* 「このリポジトリのルート直下にある `*.html`（index.htmlを除く）をGitHub Contents APIで取得し、一覧リンクを自動生成する index.html を作って。日本語ファイル名も動くように encodeURIComponent を使って。見出し＋検索ボックス付きで、シンプルなデザインにして。」

---

## Kazへのおすすめ

まずは **①（indexをJSで自動生成）** が最速で運用ラク。
増えてきて「並び順ルールを厳密にしたい」「フォルダ分けしたい」になったら **②（Actions）** に進めばOK。

---

やるなら次の質問だけ：
**HTMLは今後も「ルート直下」に置き続ける？ それとも `pages/` みたいなフォルダにまとめたい？**
（どっちでも対応できる。おすすめは後者だけど、今の運用でもOK）

---
